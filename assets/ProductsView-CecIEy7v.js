import{d as k,r as i,o as w,w as x,c as C,a as n,b as l,e as _,f as t,_ as $,F as u,g as p,h as S,t as c,i as P,j as b,u as j,R as T,n as z}from"./index-DeAbvZPb.js";import{a as L,b as N}from"./products-CdmBiZxz.js";const V={class:"container mt-md-5 mt-3 mb-7"},A={class:"row"},B={class:"col-md-4"},F={class:"accordion mb-3"},G={class:"card border-0"},O={id:"collapseOne",class:"collapse show"},R={class:"card-body py-0"},W={class:"list-unstyled"},q=["onClick"],D={class:"col-md-8"},E={class:"row"},M={class:"card border-0 mb-4 position-relative"},U=["src","alt"],H={class:"card-body p-0"},I={class:"mt-3 mb-0"},J={class:"mb-0"},K={class:"text-muted ms-2"},Q={class:"d-flex justify-content-center"},X={class:"pagination"},Y={class:"page-item"},Z=["disabled"],tt=["onClick"],st={class:"page-item"},et=["disabled"],lt=k({__name:"ProductsView",setup(at){const a=i("1"),r=i(""),v=i([]),g=i([]),d=i({total_pages:0,current_page:0,has_pre:!1,has_next:!1,category:""}),m=async()=>{try{const o=await L({page:a.value,category:r.value});v.value=o.data.products,d.value=o.data.pagination}catch{alert("取得產品列表失敗")}},h=async()=>{try{const o=await N();g.value=o.data.products}catch{alert("取得所有產品列表失敗")}};w(()=>{m(),h()}),x([a,r],()=>{m()});const y=C(()=>{const o=new Set(g.value.map(e=>e.category));return Array.from(o)});return(o,e)=>(l(),n(u,null,[_($),e[4]||(e[4]=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"400px"}},[t("div",{class:"position-absolute",style:{inset:"0","background-image":"url(https://images.unsplash.com/photo-1656275537622-7837184a0dcc?q=80&w=1350&auto=format&fit=crop)","background-position":"center","background-size":"cover","background-repeat":"no-repeat",opacity:"0.1"}}),t("h2",{class:"fw-bold"},"產品列表")],-1)),t("div",V,[t("div",A,[t("div",B,[t("div",F,[t("div",G,[e[3]||(e[3]=t("div",{class:"card-header px-0 py-4 bg-white","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center"},[t("h4",{class:"mb-0"},"分類"),t("i",{class:"fas fa-chevron-down"})])],-1)),t("div",O,[t("div",R,[t("ul",W,[t("li",null,[t("button",{onClick:e[0]||(e[0]=s=>r.value=""),class:"d-block py-2 border-0 bg-transparent text-muted",type:"button"}," 全部 ")]),(l(!0),n(u,null,p(y.value,s=>(l(),n("li",{key:s},[t("button",{onClick:f=>r.value=s,class:"d-block py-2 border-0 bg-transparent text-muted",type:"button"},c(s),9,q)]))),128))])])])])])]),t("div",D,[t("div",E,[(l(!0),n(u,null,p(v.value,s=>(l(),n("div",{key:s.id,class:"col-md-6"},[t("div",M,[t("img",{src:s.imageUrl,class:"card-img-top object-fit-cover",style:{height:"320px"},alt:s.title},null,8,U),t("div",H,[t("h4",I,[_(j(T),{to:`/products/${s.id}`},{default:P(()=>[b(c(s.title),1)]),_:2},1032,["to"])]),t("p",J,[b(" NT$ "+c(s.price.toLocaleString("zh-TW"))+" ",1),t("span",K,[t("del",null,"NT$ "+c(s.origin_price.toLocaleString("zh-TW")),1)])])])])]))),128))]),t("nav",Q,[t("ul",X,[t("li",Y,[t("button",{onClick:e[1]||(e[1]=s=>a.value=String(Number(a.value)-1)),disabled:!d.value.has_pre,class:"page-link"}," « ",8,Z)]),(l(!0),n(u,null,p(d.value.total_pages,s=>(l(),n("li",{key:s,class:z(["page-item",{active:a.value===s.toString()}])},[t("button",{onClick:f=>a.value=s.toString(),class:"page-link"},c(s),9,tt)],2))),128)),t("li",st,[t("button",{onClick:e[2]||(e[2]=s=>a.value=String(Number(a.value)+1)),disabled:!d.value.has_next,class:"page-link"}," » ",8,et)])])])])])]),_(S)],64))}});export{lt as default};
